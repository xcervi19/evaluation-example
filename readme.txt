'''
Task:
Create module (class) the Evaluation() as service for provide fitnesses for models and strategy evaluation.
First iter is focused on evaluate static positions, it means that all positions have the same duration same TP and SL.
first Iter:
For providing fitness is needed: Mean profit per hour (not per position because we need comparition across batch of strategies on the same time interval)
                                 Positive Integral - get space 0 < value < cumsum
                                 Negative Integral   get space 0 > value > cumsum
                                 Max drawdown: https://en.wikipedia.org/wiki/Drawdown_(economics)

Also return positions times and values for testing and compare with MT4

IMPORTANT: Because we want to use Evaluation object across parallel processing in shared memory we should have pre-counted as much as possible.
            So for example we should precompute profit for every possible time (index, every candle) and for specific strategy only select indexes and count fitness.

Evaluation(timeCandles)
Evaluation.eval(finalFrame, List selection])
    return: dict computed selected  values

TO DO: other ideas how to geenralize what you want to compute. All is focused to performance.
TO DO: Tests

Second Iter:
    Add evaluation which return fitness data and additionaly statistic line data between cumsum first (0) and last point. 



Result example

string times[] = {"2021.06.25 04:25:00","2021.06.25 12:10:00","2021.06.25 16:45:00","2021.06.28 10:05:00","2021.07.01 10:05:00","2021.07.01 10:25:00","2021.07.02 00:00:00","2021.07.02 12:00:00","2021.07.05 12:15:00","2021.07.06 00:10:00","2021.07.06 06:00:00","2021.07.07 00:10:00"};

int takeProfits[] = {200,200,200,200,200,200,200,200,200,200,200,200};

int stopLossis[] = {200,200,200,200,200,200,200,200,200,200,200,200};

string types[] = {"long","long","long","long","long","long","long","long","long","long","long","long"};

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                               Position summary data                                                                               |
+---------------------+---------------------+---------------------+------------------+-----------------+---------------------+---------------------+----------------+---------------+
|      Start time     |       End time      |        Profit       | first high price | first low price |  take profit points |   stop loss points  | End high price | End low price |
+---------------------+---------------------+---------------------+------------------+-----------------+---------------------+---------------------+----------------+---------------+
| 2021-06-25 04:25:00 | 2021-06-25 05:20:00 | -34.000000000000696 |      0.9175      |     0.91717     |  -19.00000000000235 | -34.000000000000696 |    0.91731     |    0.91716    |
| 2021-06-25 12:10:00 | 2021-06-25 13:05:00 |  15.999999999993797 |     0.91681      |     0.91653     |   41.9999999999976  |  15.999999999993797 |    0.91696     |     0.9167    |
| 2021-06-25 16:45:00 | 2021-06-25 17:40:00 |  26.999999999999247 |     0.91511      |     0.91422     |  77.00000000000485  |  26.999999999999247 |    0.91585     |    0.91535    |
| 2021-06-28 10:05:00 | 2021-06-28 11:00:00 |   -4.000000000004   |     0.91755      |     0.91721     |  31.999999999998696 |   -4.000000000004   |    0.91777     |    0.91741    |
| 2021-07-01 10:05:00 | 2021-07-01 11:00:00 |   72.0000000000054  |     0.92552      |     0.92513     |  128.00000000000588 |   72.0000000000054  |    0.92661     |    0.92605    |
| 2021-07-01 10:25:00 | 2021-07-01 11:20:00 |   83.9999999999952  |     0.92543      |     0.92491     |  134.99999999999625 |   83.9999999999952  |     0.9266     |    0.92609    |
| 2021-07-02 00:00:00 | 2021-07-02 00:55:00 |  7.0000000000014495 |      0.9252      |     0.92437     |  24.000000000001798 |  7.0000000000014495 |    0.92538     |    0.92521    |
| 2021-07-02 12:00:00 | 2021-07-02 12:55:00 |  60.00000000000449  |     0.92622      |     0.92603     |  112.99999999999643 |  60.00000000000449  |    0.92719     |    0.92666    |
| 2021-07-05 12:15:00 | 2021-07-05 13:10:00 |  -49.99999999999449 |     0.92149      |     0.92122     | -15.999999999993797 |  -49.99999999999449 |    0.92129     |    0.92095    |
| 2021-07-06 00:10:00 | 2021-07-06 01:10:00 |  77.00000000000485  |     0.92117      |     0.92109     |  81.00000000000884  |  77.00000000000485  |     0.9219     |    0.92186    |
| 2021-07-06 06:00:00 | 2021-07-06 06:55:00 | -28.000000000005798 |     0.92103      |     0.92065     |  -18.0000000000069  | -28.000000000005798 |    0.92077     |    0.92067    |
| 2021-07-07 00:10:00 | 2021-07-07 01:05:00 |  147.00000000000824 |     0.92348      |     0.92304     |  169.00000000000804 |  147.00000000000824 |    0.92473     |    0.92451    |
+---------------------+---------------------+---------------------+------------------+-----------------+---------------------+---------------------+----------------+---------------+
+----------------------------------------------------------------------------------------------------------------------------+
|                                                        Profit data                                                         |
+--------------------+-------------------+---------------------+-------------------+--------------------+--------------------+
|        mean        |     profitSum     |     negPosRatio     |      maxLost      |  positionStepMean  |  positionStepStd   |
+--------------------+-------------------+---------------------+-------------------+--------------------+--------------------+
| 31.166666666667307 | 374.0000000000077 | 9223372036854775807 | 4.999999999988347 | 204.54545454545453 | 222.57720361763901 |
+--------------------+-------------------+---------------------+-------------------+--------------------+--------------------+
+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
|                                                                                 Slope data                                                                                 |
+--------------------+--------------------+--------------------+-----------------------+-------------------+-------------------+--------------------+------------------------+
|       slope        |     intercept      |      r_value       |        p_value        |      std_err      |       stdMax      |       stdMin       |        stdMean         |
+--------------------+--------------------+--------------------+-----------------------+-------------------+-------------------+--------------------+------------------------+
| 34.055944055945126 | -51.47435897436873 | 0.9589661344809834 | 8.551201757896757e-07 | 3.184009338002817 | 50.85897435897999 | -62.08508158508312 | 1.4802973661668755e-14 |
+--------------------+--------------------+--------------------+-----------------------+-------------------+-------------------+--------------------+------------------------+

'''